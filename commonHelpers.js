import{a as d,b as w}from"./assets/vendor-27708577.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const h=document.getElementById("themeSwitch");h.addEventListener("change",function(){const t=document.querySelector(".logo-icon use");this.checked?t.setAttribute("href","../img/icons.svg#icon-logo-dark"):t.setAttribute("href","../img/icons.svg#icon-logo-light")});window.addEventListener("DOMContentLoaded",function(){const t=localStorage.getItem("theme");t&&(document.body.classList.add(t),t==="dark-theme"&&(h.checked=!0))});h.addEventListener("change",function(){this.checked?(document.body.classList.add("dark-theme"),document.body.classList.remove("light-theme"),localStorage.setItem("theme","dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),localStorage.setItem("theme","light-theme"))});const y=document.querySelector(".btn-close"),p=document.querySelector(".burger-menu"),g=document.querySelector(".menu-section");function $(){g.classList.add("is-open"),p.style.display="none",y.style.display="inline-block",g.style.display="block"}p.addEventListener("click",$);function C(){p.style.display="inline-block",y.style.display="none",g.style.display="none"}y.addEventListener("click",C);class k{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books",this.TOP_BOOKS_ENDPOINT="/top-books",this.CATEGORY_ENDPOINT="/category?category=",this.CATEGORY_LIST_ENDPOINT="/category-list"}async getTopBooks(){try{const e=`${this.BASE_URL}${this.TOP_BOOKS_ENDPOINT}`;return(await d.get(e)).data}catch(e){throw console.error("Error fetching popular books:",e),e}}async getBooksByCategory(e){try{const o=`${this.BASE_URL}${this.CATEGORY_ENDPOINT}${e}`;return(await d.get(o)).data}catch(o){throw console.error(`Error fetching books for category '${e}':`,o),o}}async getDetails(e){try{const o=`${this.BASE_URL}/${e}`;return(await d.get(o)).data}catch(o){throw console.error(`Error fetching details for book with ID '${e}':`,o),o}}async getCategoryList(){try{const e=`${this.BASE_URL}${this.CATEGORY_LIST_ENDPOINT}`;return(await d.get(e)).data}catch(e){throw console.error("Error fetching category list:",e),e}}}function _(t,e){return`<li class='gallery-book-item' data-bookid="${t.books[e]._id}">
        <a class="gallery-book-link">
        <div class="preview">
          <img class="gallery-book-img" data-id="${t.books[e]._id}" src="${t.books[e].book_image}" alt="${t.books[e].title}">
          <div class="actions-card">
        <p class="action-text">quick view</p>
          </div>
        </div>
          <div class="content">
            <h3 class="gallery-book-name">${t.books[e].title}</h3>
            <h4 class="gallery-book-text">${t.books[e].author}</h4>
          </div>
        </a>
    </li>`}const M=new k,l={bookList:document.querySelector(".book-list"),topBooksList:document.querySelector(".top-books-list"),booksTitleContainer:document.querySelector(".books-title-container")};function S(t){l.topBooksList.innerHTML="",l.booksTitleContainer.innerHTML="";const e=document.createElement("h2");e.textContent=t,l.booksTitleContainer.appendChild(e),M.getBooksByCategory(t).then(o=>q(o)).catch(o=>console.error("Error fetching top books:",o))}function q(t){const e=t.map(o=>`<li class='gallery-book-item' data-bookid="${o._id}">
        <a class="gallery-book-link">
            <div class="preview">
            <img class="gallery-book-img" data-id="${o._id}" src="${o.book_image}" alt="${o.title}">
            <div class="actions-card">
                <p class="action-text">quick view</p>
            </div>
            </div>
            <div class="content">
            <h3 class="gallery-book-name">${o.title}</h3>
            <h4 class="gallery-book-text">${o.author}</h4>
            </div>
        </a>
        </li>`).join("");l.bookList.innerHTML=e}const v=new k;let b=1;function f(){b=O(window.innerWidth),v.getTopBooks().then(t=>x(t,b)).catch(t=>console.error("Error fetching top books:",t))}function O(t){return t>=1440?5:t>=768?3:1}function x(t,e){l.topBooksList.innerHTML="",l.booksTitleContainer.innerHTML="";const o=t.map(s=>{let n=`<li><h2 class="gallery-title">${s.list_name}</h2>
    <ul class="gallery-book-list" data-filter="${s.list_name}">`,i=[];for(let u=0;u<e&&u<s.books.length;u++){let I=_(s,u);i.push(I)}const a=`<button class="see-more-btn" data-filter="${s.list_name}" type="button">See More</button>`,c=i.join(" ");return n+c+"</ul>"+a+"</li>"}).join("");l.topBooksList.innerHTML=o;const r='<h2 class="top-books-title">Best Sellers <span class="colortext">Books</span></h2>';l.booksTitleContainer.innerHTML=r,A()}function A(){document.querySelectorAll(".see-more-btn").forEach(e=>{e.addEventListener("click",N)})}async function N(t){t.preventDefault(),document.querySelectorAll(".gallery-book-list").forEach(i=>{i.style.display="none"});let o=t.target.dataset.filter;const r=document.querySelector(`ul[data-filter="${o}"]`);r.style.display="block",document.querySelectorAll(".top-books-list > li").forEach(i=>{i.querySelector(`ul[data-filter="${o}"]`)===null&&i.remove()});const n=r.parentElement.querySelector(".see-more-btn");if(n.style.display="none",o!=="Best Sellers Books"){const i=await v.getBooksByCategory(o);H(i,o)}}function H(t,e){const o=document.querySelector(`ul[data-filter="${e}"]`),r=t.map(s=>`
    <li class='gallery-book-item' data-bookid="${s._id}">
      <a class="gallery-book-link">
        <div class="preview">
          <img class="gallery-book-img" data-id="${s._id}" src="${s.book_image}" alt="${s.title}">
          <div class="actions-card">
            <p class="action-text">quick view</p>
          </div>
        </div>
        <div class="content">
          <h3 class="gallery-book-name">${s.title}</h3>
          <h4 class="gallery-book-text">${s.author}</h4>
        </div>
      </a>
    </li>`).join("");o.innerHTML=r}window.addEventListener("resize",()=>{f()});const P=new k,L=document.getElementById("category-list");document.getElementById("all-categories");document.addEventListener("DOMContentLoaded",async function(){const t=await P.getCategoryList();F(t);const e=document.getElementById("all-categories");e.classList.add("active"),e.addEventListener("click",function(){f()})});function F(t){const e='<li class="category-item" id="all-categories" >All categories</li>',o=t.map(r=>`<li class="category-item">${r.list_name}</li>`).join("");L.innerHTML=e+o,L.addEventListener("click",function(r){if(r.target.classList.contains("category-item")){document.querySelectorAll(".category-item").forEach(i=>{i.classList.remove("active")}),r.target.classList.add("active");const n=r.target.textContent;S(n)}})}const E=document.querySelector(".books-section");function R(t){let e=localStorage.getItem("booksShoppingList");return e?(e=JSON.parse(e),e.findIndex(r=>r._id===t._id)):-1}function j(t){let e=localStorage.getItem("booksShoppingList");e?e=JSON.parse(e):e=[],e.findIndex(r=>r._id===t._id)===-1&&(e.push(t),localStorage.setItem("booksShoppingList",JSON.stringify(e)))}function D(t){let e=localStorage.getItem("booksShoppingList");if(!e)return;e=JSON.parse(e);const o=e.findIndex(r=>r._id===t._id);o!==-1&&(e.splice(o,1),localStorage.setItem("booksShoppingList",JSON.stringify(e)))}function J(t){let e,o;const r=document.querySelector("#modal-template"),s=new w.create(r,{onShow:c=>{document.body.classList.add("modal-opened"),e=m=>{m.key==="Escape"&&c.close()},document.addEventListener("keydown",e),o=m=>{document.body.classList.remove("modal-opened"),c.close()},c.element().querySelector(".modal-close").addEventListener("click",o)},onClose:c=>{document.removeEventListener("keydown",e),c.element().querySelector(".modal-close").removeEventListener("click",o)}}),n=s.element();n.querySelector(".book-img").src=t.book_image,n.querySelector(".book-name").innerText=t.title,n.querySelector(".book-author").innerText=t.author,n.querySelector(".book-description").innerText=t.description,n.querySelector(".book-description").innerText=t.description,t.buy_links.forEach(c=>{c.name==="Amazon"?n.querySelector(".book-links-amazon").href=c.url:c.name==="Apple Books"&&(n.querySelector(".book-links-applebook").href=c.url)});const i=n.querySelector(".addToList"),a=n.querySelector(".removeFromList");R(t)>-1&&(i.classList.add("hidden"),a.classList.remove("hidden")),i.addEventListener("click",c=>{c.preventDefault(),j(t),n.querySelector(".removeFromList-info").classList.remove("hidden"),i.classList.add("hidden"),a.classList.remove("hidden")}),a.addEventListener("click",c=>{c.preventDefault(),D(t),n.querySelector(".removeFromList-info").classList.add("hidden"),i.classList.remove("hidden"),a.classList.add("hidden")}),s.show()}async function B(t){try{const{data:e}=await d.get(t);J(e)}catch(e){console.log(e.message)}}E.addEventListener("click",function(t){const e=t.target.closest("a");e.classList.contains("js-open-modal")&&(t.preventDefault(),B(`https://books-backend.p.goit.global/books/${e.dataset.bookid}`))});const T=document.getElementById("themeSwitch");window.addEventListener("DOMContentLoaded",function(){const t=localStorage.getItem("theme");t&&(document.body.classList.add(t),t==="dark-theme"&&(T.checked=!0))});T.addEventListener("change",function(){this.checked?(document.body.classList.add("dark-theme"),document.body.classList.remove("light-theme"),localStorage.setItem("theme","dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),localStorage.setItem("theme","light-theme"),E.addEventListener("click",function(t){t.target.classList.contains("js-open-modal")&&(t.preventDefault(),B(t.target.href))}))});f();S("Advice How-To and Miscellaneous");
//# sourceMappingURL=commonHelpers.js.map
